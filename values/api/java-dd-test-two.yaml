enabled: true
version: "0.6"
replicas: 1
environment: prod
image:
  repository: "kamuri/java-dd-test"

monitoring:
  datadog:
    enabled: false

service:
  port: 8080

env:
  - name: CONTEXT_PATH
    value: /java-dd-test-two

  - name: HOST_IP
    valueFrom:
      fieldRef:
        fieldPath: status.hostIP

  - name: OTEL_EXPORTER_OTLP_ENDPOINT
    value: "http://$(HOST_IP):4318"

  - name: CONTEXT_URL
    value: "http://api.kamuridesu.com/java-dd-test"

  - name: JAVA_TOOL_OPTIONS
    value: -Xms128m -Xmx300m

  - name: DD_SERVICE
    value: "java-dd-test-two"

  - name: SPRING_APPLICATION_NAME
    value: "java-dd-test-two"

  - name: DD_TRACE_HEADER_TAGS
    value: "x-correlation-id:x-correlation-id,baggage:baggage"

resources:
  limits:
    cpu: "0.2"
    memory: "300Mi"
readinessProbe:
  enabled: true
  probes:
    httpGet:
      path: /java-dd-test-two/actuator/health
      port: 8080
    initialDelaySeconds: 90
    periodSeconds: 30
    timeoutSeconds: 5
    failureThreshold: 5
livenessProbe:
  enabled: true
  probes:
    httpGet:
      path: /java-dd-test-two/actuator/health
      port: 8080
    initialDelaySeconds: 100
    periodSeconds: 30
    timeoutSeconds: 5
    failureThreshold: 10
ingress:
  enabled: true
  className: haproxy
  hosts:
    - host: api.kamuridesu.com
      paths:
        - path: /java-dd-test-two
          pathType: Prefix
